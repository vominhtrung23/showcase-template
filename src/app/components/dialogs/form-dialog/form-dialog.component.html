<mat-progress-bar mode="indeterminate" *ngIf="!pageLoaded"></mat-progress-bar>
<div class="tcma-sb">
<div class="csp-leadgen-form relative sm:p-1 lg:p-2 text-sm">
  <form (ngSubmit)="onSubmit()" [formGroup]="form" *ngIf="!submitSucceed" [class]="getFormTitle(formTitle)" [attr.categoryformid]="formId">
    <mat-dialog-content>
      <div *ngFor="let lField of leadgenFields" class="form-row">
        <app-leadgenfield [leadField]="lField" [form]="form"></app-leadgenfield>
      </div>
    </mat-dialog-content>
    <div mat-dialog-actions class="form-row text-center relative">
      <!-- <button mat-raised-button type="button" (click)="closeDialog()">{{label.btnCancel}}</button> -->
      <button mat-raised-button color="primary" type="submit"
        [disabled]="!form.valid || leadgenFields.length == 0 || !this.pageLoaded">{{label.btnSubmit}}</button>
    </div>
    <div class="absolute bottom-0 right-0 -m-4 text-right">
      <button mat-icon-button (click)="closeDialog($event)">
        <div class="material-icons opacity-75">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="gray" width="1.5rem" height="1.5rem">
            <path d="M0 0h24v24H0z" fill="none" />
            <path
              d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
          </svg>
        </div>
      </button>
    </div>
  </form>
  <div id="submitted-ok" *ngIf="submitSucceed">
    <div id="successModal" class="" role="dialog" data-keyboard="false" data-backdrop="static">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="page-body text-center">
            <div class="head">
              <h3 class="text-xl font-bold block" style="margin-top:15px;">{{label.thankyou}}</h3>
              <h4>{{label.submittedSuccessful}} </h4>
            </div>
          </div>
          <p class="text-center"><i [innerHTML]="verbiageDownload()"></i></p><br />
          <div class="modal-footer text-center"><a *ngIf="decodedAssetLink != ''" [href]="decodedAssetLink"
              target="_blank">
              <button type="button" (click)="goDownload()"
                class="flex-no-shrink py-2 px-4 rounded shadow border border-transparent bg-secondary hover:bg-secondary-dark text-secondary-contrast uppercase">{{label.btnDownload}}</button></a>&nbsp;<button
              type="button" (click)="closeDialog($event)"
              class="flex-no-shrink py-2 px-4  rounded shadow border border-transparent bg-secondary hover:bg-secondary-dark text-secondary-contrast uppercase" id="form-submitted"
              name="{{formTitle}}" data-dismiss="modal">{{label.btnOk}}</button></div>

        </div>
      </div>
    </div>
  </div>
</div>
</div>